import { PrismaClient } from "@prisma/client"

const prisma = new PrismaClient()

async function main() {
  console.log("üå± D√©but du seeding de la base de donn√©es...")

  try {
    // V√©rifier la connexion √† la base de donn√©es
    await prisma.$connect()
    console.log("‚úÖ Connexion √† la base de donn√©es √©tablie")

    // Nettoyer les donn√©es existantes dans l'ordre correct (√† cause des relations)
    console.log("üßπ Suppression des donn√©es existantes...")

    await prisma.wishlistItem.deleteMany({})
    console.log("- Wishlist items supprim√©s")

    await prisma.orderItem.deleteMany({})
    console.log("- Order items supprim√©s")

    await prisma.order.deleteMany({})
    console.log("- Orders supprim√©es")

    await prisma.address.deleteMany({})
    console.log("- Adresses supprim√©es")

    await prisma.product.deleteMany({})
    console.log("- Produits supprim√©s")

    await prisma.collection.deleteMany({})
    console.log("- Collections supprim√©es")

    await prisma.artist.deleteMany({})
    console.log("- Artistes supprim√©s")

    await prisma.user.deleteMany({})
    console.log("- Utilisateurs supprim√©s")

    console.log("üßπ Donn√©es existantes supprim√©es avec succ√®s")

    // Cr√©er les artistes
    console.log("üë®‚Äçüé® Cr√©ation des artistes...")

    const elena = await prisma.artist.create({
      data: {
        name: "Elena Vasquez",
        email: "elena@ceramika.com",
        bio: "Elena combine les techniques c√©ramiques traditionnelles du Sud-Ouest avec des sensibilit√©s de design contemporain. Son travail refl√®te une profonde connexion avec la terre et les traditions ancestrales.",
        specialty: "Fusion Traditionnelle et Contemporaine",
        location: "Santa Fe, Nouveau-Mexique",
        experience: "15+ ans",
        image: "/placeholder.svg?height=400&width=400",
        featured: true,
        awards: [
          "Prix des Arts C√©ramiques du Sud-Ouest 2023",
          "Artiste Vedette - Ceramic Monthly",
          "Bourse d'Excellence Artisanale 2022",
        ],
      },
    })

    const marcus = await prisma.artist.create({
      data: {
        name: "Marcus Chen",
        email: "marcus@ceramika.com",
        bio: "Le travail de Marcus incarne les principes du minimalisme fonctionnel. Chaque pi√®ce est con√ßue avec une attention m√©ticuleuse aux d√©tails et √† l'utilit√© quotidienne.",
        specialty: "Design Minimaliste et Fonctionnel",
        location: "Portland, Oregon",
        experience: "12+ ans",
        image: "/placeholder.svg?height=400&width=400",
        featured: true,
        awards: [
          "Prix d'Excellence C√©ramique du Pacifique Nord-Ouest",
          "Prix d'Innovation Design 2022",
          "Mention Sp√©ciale - Salon International de la C√©ramique",
        ],
      },
    })

    const sofia = await prisma.artist.create({
      data: {
        name: "Sofia Andersson",
        email: "sofia@ceramika.com",
        bio: "Sofia puise son inspiration dans le monde naturel, cr√©ant des pi√®ces qui capturent l'essence organique des formes trouv√©es dans la nature.",
        specialty: "C√©ramiques Inspir√©es par la Nature",
        location: "Asheville, Caroline du Nord",
        experience: "18+ ans",
        image: "/placeholder.svg?height=400&width=400",
        featured: true,
        awards: ["Bourse de la Fondation Nationale des Arts C√©ramiques", "Prix de l'Innovation √âcologique 2023"],
      },
    })

    const julien = await prisma.artist.create({
      data: {
        name: "Julien Moreau",
        email: "julien@ceramika.com",
        bio: "Artiste fran√ßais sp√©cialis√© dans les techniques de gla√ßure innovantes. Julien explore les limites entre art et fonctionnalit√©.",
        specialty: "Techniques de Gla√ßure Avanc√©es",
        location: "Lyon, France",
        experience: "10+ ans",
        image: "/placeholder.svg?height=400&width=400",
        featured: false,
        awards: ["Prix Jeune Talent C√©ramique France 2021", "Exposition Personnelle - Mus√©e des Arts D√©coratifs"],
      },
    })

    console.log("‚úÖ Artistes cr√©√©s avec succ√®s")

    // Cr√©er les collections
    console.log("üèõÔ∏è Cr√©ation des collections...")

    const minimalist = await prisma.collection.create({
      data: {
        name: "Collection Minimaliste",
        description:
          "Des lignes √©pur√©es et une √©l√©gance subtile d√©finissent cette collection contemporaine. Chaque pi√®ce est con√ßue pour s'int√©grer harmonieusement dans les int√©rieurs modernes.",
        image: "/placeholder.svg?height=500&width=800",
        featured: true,
        priceRange: "45‚Ç¨ - 280‚Ç¨",
        artistId: marcus.id,
      },
    })

    const rustic = await prisma.collection.create({
      data: {
        name: "H√©ritage Rustique",
        description:
          "Les techniques traditionnelles rencontrent l'attrait intemporel. Cette collection c√©l√®bre l'artisanat authentique et les m√©thodes ancestrales.",
        image: "/placeholder.svg?height=500&width=800",
        featured: true,
        priceRange: "65‚Ç¨ - 320‚Ç¨",
        artistId: elena.id,
      },
    })

    const nature = await prisma.collection.create({
      data: {
        name: "Inspiration Naturelle",
        description:
          "Formes organiques et textures inspir√©es de la nature. Chaque pi√®ce raconte l'histoire des √©l√©ments naturels qui l'ont inspir√©e.",
        image: "/placeholder.svg?height=500&width=800",
        featured: true,
        priceRange: "55‚Ç¨ - 250‚Ç¨",
        artistId: sofia.id,
      },
    })

    const contemporary = await prisma.collection.create({
      data: {
        name: "Art Contemporain",
        description:
          "Exploration moderne des formes et des couleurs. Cette collection repousse les limites de la c√©ramique traditionnelle.",
        image: "/placeholder.svg?height=500&width=800",
        featured: false,
        priceRange: "80‚Ç¨ - 450‚Ç¨",
        artistId: julien.id,
      },
    })

    console.log("‚úÖ Collections cr√©√©es avec succ√®s")

    // Cr√©er les produits
    console.log("üè∫ Cr√©ation des produits...")

    const products = [
      {
        name: "Ensemble de Bols Artisanaux",
        description:
          "Set de 4 bols en c√©ramique faits √† la main avec gla√ßure r√©active unique. Parfait pour les repas en famille ou entre amis.",
        price: 189,
        originalPrice: 220,
        images: ["/images/artisan-bowl-set.png"],
        inStock: true,
        stock: 12,
        featured: true,
        category: "Bols",
        features: [
          "Construction c√©ramique faite √† la main",
          "Gla√ßure r√©active sans danger alimentaire",
          "Compatible lave-vaisselle et micro-ondes",
          "Set de 4 bols",
          "Diam√®tre: 20 cm, Hauteur: 7.5 cm",
        ],
        artistId: elena.id,
        collectionId: rustic.id,
      },
      {
        name: "Assiettes Artisanales",
        description:
          "Set d'assiettes en c√©ramique avec design contemporain. √âl√©gance et fonctionnalit√© pour vos tables modernes.",
        price: 145,
        images: ["/images/handcrafted-dinner-plates.png"],
        inStock: true,
        stock: 8,
        featured: true,
        category: "Assiettes",
        features: [
          "C√©ramique de haute qualit√©",
          "Design contemporain",
          "Set de 6 assiettes",
          "Diam√®tre: 25 cm",
          "Finition mate √©l√©gante",
        ],
        artistId: marcus.id,
        collectionId: minimalist.id,
      },
      {
        name: "Plateau de Service C√©ramique",
        description: "Grand plateau de service parfait pour les occasions sp√©ciales. Alliant beaut√© et praticit√©.",
        price: 225,
        images: ["/images/ceramic-serving-platter.png"],
        inStock: true,
        stock: 5,
        featured: true,
        category: "Plateaux",
        features: [
          "Grande taille pour service",
          "Finition artisanale",
          "Parfait pour les r√©ceptions",
          "Dimensions: 35x25 cm",
          "R√©sistant aux taches",
        ],
        artistId: sofia.id,
        collectionId: nature.id,
      },
      {
        name: "Bol Vague Oc√©anique",
        description: "Bol unique inspir√© par les mouvements de l'oc√©an. Forme organique et gla√ßure bleue apaisante.",
        price: 95,
        images: ["/images/ocean-wave-bowl.png"],
        inStock: true,
        stock: 15,
        featured: true,
        category: "Bols",
        features: [
          "Design inspir√© de l'oc√©an",
          "Gla√ßure bleue unique",
          "Forme ergonomique",
          "Diam√®tre: 18 cm",
          "Pi√®ce unique",
        ],
        artistId: sofia.id,
        collectionId: nature.id,
      },
      {
        name: "Vase Minimaliste",
        description: "Vase aux lignes √©pur√©es, parfait pour mettre en valeur vos fleurs pr√©f√©r√©es.",
        price: 120,
        images: ["/images/minimalist-vase.png"],
        inStock: true,
        stock: 10,
        featured: false,
        category: "Vases",
        features: ["Design minimaliste", "Hauteur: 25 cm", "Ouverture optimis√©e", "Stable et √©l√©gant", "Finition mate"],
        artistId: marcus.id,
        collectionId: minimalist.id,
      },
      {
        name: "Set de Mugs Rustiques",
        description: "Ensemble de 2 mugs avec finition rustique authentique. Parfait pour vos moments cocooning.",
        price: 75,
        images: ["/images/rustic-mug-set.png"],
        inStock: true,
        stock: 20,
        featured: false,
        category: "Mugs",
        features: [
          "Set de 2 mugs",
          "Finition rustique",
          "Anse ergonomique",
          "Capacit√©: 350ml chacun",
          "R√©sistant √† la chaleur",
        ],
        artistId: elena.id,
        collectionId: rustic.id,
      },
      {
        name: "Ensemble Mugs C√©ramique",
        description: "Collection de mugs modernes aux couleurs harmonieuses. Id√©al pour d√©buter la journ√©e.",
        price: 85,
        images: ["/images/ceramic-mug-set.png"],
        inStock: true,
        stock: 18,
        featured: false,
        category: "Mugs",
        features: [
          "Set de 4 mugs",
          "Couleurs assorties",
          "Design moderne",
          "Capacit√©: 300ml",
          "Compatible micro-ondes",
        ],
        artistId: julien.id,
        collectionId: contemporary.id,
      },
      {
        name: "Bol de Service Contemporain",
        description: "Grand bol de service aux lignes contemporaines. Parfait pour vos salades et accompagnements.",
        price: 135,
        images: ["/images/contemporary-serving-bowl.png"],
        inStock: true,
        stock: 7,
        featured: false,
        category: "Bols",
        features: [
          "Grande capacit√©",
          "Design contemporain",
          "Finition brillante",
          "Diam√®tre: 28 cm",
          "Facile d'entretien",
        ],
        artistId: julien.id,
        collectionId: contemporary.id,
      },
      {
        name: "Service D√Æner Botanique",
        description: "Service complet avec motifs botaniques d√©licats. √âl√©gance naturelle pour vos tables.",
        price: 320,
        originalPrice: 380,
        images: ["/images/botanical-dinner-set.png"],
        inStock: true,
        stock: 4,
        featured: true,
        category: "Services",
        features: [
          "Service pour 6 personnes",
          "Motifs botaniques peints √† la main",
          "18 pi√®ces au total",
          "Assiettes plates et creuses",
          "Emballage cadeau inclus",
        ],
        artistId: sofia.id,
        collectionId: nature.id,
      },
      {
        name: "Collection Terre et Feu",
        description: "Ensemble de pi√®ces aux tons terreux, √©voquant les √©l√©ments primaires de la c√©ramique.",
        price: 280,
        images: ["/images/earth-fire-collection.png"],
        inStock: true,
        stock: 6,
        featured: true,
        category: "Collections",
        features: [
          "Tons terreux authentiques",
          "Techniques de cuisson traditionnelles",
          "Set de 8 pi√®ces vari√©es",
          "Chaque pi√®ce est unique",
          "Certificat d'authenticit√©",
        ],
        artistId: elena.id,
        collectionId: rustic.id,
      },
    ]

    for (const [index, productData] of products.entries()) {
      await prisma.product.create({ data: productData })
      console.log(`- Produit ${index + 1}/${products.length} cr√©√©: ${productData.name}`)
    }

    console.log("‚úÖ Produits cr√©√©s avec succ√®s")

    // Cr√©er un utilisateur de test
    console.log("üë§ Cr√©ation de l'utilisateur de test...")

    const testUser = await prisma.user.create({
      data: {
        email: "test@ceramika.com",
        password: "$2a$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj/hGGUKxSrm", // password123
        firstName: "Test",
        lastName: "User",
        phone: "+33 1 23 45 67 89",
        role: "CUSTOMER",
      },
    })

    // Cr√©er une adresse de test
    await prisma.address.create({
      data: {
        userId: testUser.id,
        firstName: "Test",
        lastName: "User",
        addressLine1: "123 Rue de la C√©ramique",
        city: "Paris",
        state: "√éle-de-France",
        zipCode: "75001",
        country: "France",
        isDefault: true,
      },
    })

    // Cr√©er quelques √©l√©ments de wishlist
    const firstProduct = await prisma.product.findFirst()
    if (firstProduct) {
      await prisma.wishlistItem.create({
        data: {
          userId: testUser.id,
          productId: firstProduct.id,
        },
      })
    }

    console.log("‚úÖ Utilisateur de test cr√©√© avec succ√®s")

    // Afficher un r√©sum√©
    const counts = {
      artists: await prisma.artist.count(),
      collections: await prisma.collection.count(),
      products: await prisma.product.count(),
      users: await prisma.user.count(),
    }

    console.log("\nüéâ Seeding termin√© avec succ√®s!")
    console.log("\nüìä R√©sum√© des donn√©es cr√©√©es:")
    console.log(`- ${counts.artists} artistes`)
    console.log(`- ${counts.collections} collections`)
    console.log(`- ${counts.products} produits`)
    console.log(`- ${counts.users} utilisateurs`)

    console.log("\nüîê Compte de test cr√©√©:")
    console.log("Email: test@ceramika.com")
    console.log("Mot de passe: password123")
  } catch (error) {
    console.error("‚ùå Erreur lors du seeding:", error)
    throw error
  }
}

main()
  .catch((e) => {
    console.error("‚ùå Erreur fatale:", e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
    console.log("üîå Connexion √† la base de donn√©es ferm√©e")
  })
